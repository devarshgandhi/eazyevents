<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Eazy Events</title>
    <link rel="stylesheet" href="themes/Bootstrap.css">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.0/jquery.mobile.structure-1.4.0.min.css" />
    <link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
    <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.js"></script>
    <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <link rel="stylesheet" href="scripts/jquery.timepicker.css" />
    <script src="scripts/jquery.timepicker.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!--Declare page as mobile friendly -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0" />
    <!-- Declare page as iDevice WebApp friendly -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- iDevice WebApp Splash Screen, Regular Icon, iPhone, iPad, iPod Retina Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/splash/splash-icon.png">
    <!-- iPhone 3, 3Gs -->
    <link rel="apple-touch-startup-image" href="images/splash/splash-screen.png" media="screen and (max-device-width: 320px)" />
    <!-- iPhone 4 -->
    <link rel="apple-touch-startup-image" href="images/splash/splash-screen%402x.png" media="(max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2)" />
    <!-- iPhone 5 -->
    <link rel="apple-touch-startup-image" sizes="640x1096" href="images/splash/splash-screen%403x.png" />
    <!-- Page Title -->
    <!-- Stylesheet Load -->
    <!-- <link href="styles/style.css" rel="stylesheet" type="text/css"> -->
    <link rel="stylesheet" href="themes/Bootstrap.css">
    <!-- <link href="styles/framework-style.css" rel="stylesheet" type="text/css">
    <link href="styles/framework.css" rel="stylesheet" type="text/css">
    <link href="styles/bxslider.css" rel="stylesheet" type="text/css">
    <link href="styles/swipebox.css" rel="stylesheet" type="text/css">
    <link href="styles/icons.css" rel="stylesheet" type="text/css">
    <link href="styles/retina.css" rel="stylesheet" type="text/css" media="only screen and (-webkit-min-device-pixel-ratio: 2)" /> -->
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.0/jquery.mobile.structure-1.4.0.min.css" />
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <style>
    .ttable {
        border-collapse: collapse;
        width: 100%;
    }

    .tth,
    .ttd {
        text-align: left;
        padding: 8px;
    }

    .ttr:nth-child(even) {
        background-color: #D3D3D3;
    }

    .ttr:nth-child(odd) {
        background-color: white;
    }

    .tth {
        background-color: #006bb3;
        color: white;
    }

    .ttd {
        /*background-color: white;*/
        color: black;
    }

    .btn-width {
        width: 80px !important;
        border: none !important;
        /*background-color:#cacbe8 !important;*/
        /*color:black !important;*/
    }

    .btn-width-create {
        width: 125px !important;
        border: none !important;
        background-color: #3b40d9 !important;
        /*color:black !important;*/
    }
    </style>
    <script>
    $(document).on("pagebeforecreate", function() {
        $('#date').datepicker();
        $('#time').timepicker();
    });

   $(function(){
      var userobj = $.parseJSON(sessionStorage.getItem("userObject"));
        console.log(userobj);
        console.log("ddd        ",userobj.userId)
        var uid = userobj.userId;
        debugger;
        $('.uidobj').val(userobj.userId);
        //$('#formLoginUserName').value("a1");
        $('#username').append(userobj.firstName);

    var events;
    var keyvalue = 0;
    $.ajax({
        type: 'post',
        url: 'http://10.0.0.156:8080/EazyEventAPI/eazy/events/rest/geteventscreatedbyuser',
        data: $('#forinput').serialize(),
        success: function(data) {
            console.log("the data is ", data);
            events = data;


            $.each(events, function(key, value) {
                debugger;
                 var date,time,temp;
                temp = new Date(value.date);
                 date=temp.toLocaleDateString();
                time = temp.toLocaleTimeString();
                //console.log(value);
                keyvalue = keyvalue + 1;
                $("#table_for_events").append("<tr class='ttr'><td class='ttd' style='width:20%;padding:10px 0px;'> " + keyvalue + "</td><td class='ttd' style='width:20%;padding:10px 0px;'><a href='#' class='ttd' data-toggle='modal' class='openmodal' href='#addBookDialog'>" + value.name + "</a></td><td class='ttd' style='width:20%;padding:10px 0px;'>" + value.street + " , "+value.city+" , " + value.state + " , "+value.zipcode+"</td><td class='ttd' style='width:20%;padding:10px 0px;''>" + date + "</td><td class='ttd' style='width:10%;padding:10px 0px;'>" + time + "</td><td class='ttd' style='width:5%;padding:10px 0px;'> <a href='#' data-toggle='modal' class='editmodal' valid=" + value.eventid + " onclick='edit(this)'><span class='glyphicon glyphicon-edit'></span></a></td><td class='ttd' style='width:5%;padding:10px 0px;'> <a href='#' onclick='deleteevent(this)' valid=" + value.eventid + " ><span class='glyphicon glyphicon-trash'></span></a></td></tr>");
            })
        },
        error:function(xhr,status){
                debugger;
            }
    });
});


    function logout() {
        console.log("logout is called");
        sessionStorage.clear();
        window.location.href = "index.html";
    }

    //for user list
    $(document).on("click", ".openmodal", function(a, b) {
        //debugger;
        $('#modalid').modal('show');
        //var myBookId = $(this).data('id');
        //$(".modal-body").html("hello how r u");
    });

    function getCurrentEvent(eventid){
        for (var i = 0; i < events.length; i++) {
            if (eventid == events[i].eventid) {
               return events[i];
            }
        }
    };
    //for edit
    function edit(event) {
        //debugger;
        var eventid = event.attributes.valid.value;
        console.log(eventid, "        ", event);
        var currentevent = getCurrentEvent(eventid);
        console.log("currentevent is ",currentevent);
        $('#editModal').modal('show');
        $('#eventname').val(currentevent.name);
        $('#eventid').val(currentevent.eventid);
        $('#description').val(currentevent.description);
        $('#street').val(currentevent.street);
        $('#city').val(currentevent.city);
        $('#state').val(currentevent.state);
        $('#zipcode').val(currentevent.zipcode);
        $('#date').val(currentevent.date);
        $('#time').val(currentevent.time);
        $('#capacity').val(currentevent.maxcapacity);

    }

    //for delete
    function deleteevent(event) {
        //debugger;
        var eventid = event.attributes.valid.value;
        console.log(eventid, "        ", event);
        var currentevent = getCurrentEvent(eventid);
        console.log("currentevent is ",currentevent);
        if(confirm("Are you sure you want to Delete "+currentevent.eventname)){
            //api called than reload
             $('#eventid').val(currentevent.eventid);
            location.reload();

        }
    }
    </script>
</head>

<body>
    <div data-role="page" data-theme="f" style="background-image:url(../images/Embossed_Paper_Logo.jpg); background-size: cover;background-repeat: no-repeat;background-position: center;">
        <div data-role="header" data-position="inline" style="background-color:transparent;">
            <h1 id="username" style="color:black; font-weight: bold">Welcome&nbsp;</h1>
            <div data-role="navbar">
                <ul>
                    <li><a href="admin_home.html" rel="external" data-icon="home">Home</a></li>
                    <li><a href="admin_all_event.html" rel="external" data-icon="grid">All Events</a></li>
                    <li><a href="admin_my_event.html" rel="external" class="ui-btn-active" data-icon="check">My Events</a></li>
                </ul>
            </div>
        </div>
        <div class="modal fade" id="modalid">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button typr="button" class="btn btn-default" data-dismiss="modal">×</button>
                        <h3>Modal header</h3>
                    </div>
                    <div class="modal-body">
                        <p>some content</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div class="modal fade" id="deleteModal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button typr="button" class="btn btn-default" data-dismiss="modal">×</button>
                        <h3>Delete Event</h3>
                    </div>
                    <div class="modal-body">
                        <p>Are you sure you </p>
                    </div>
                </div>
            </div>
        </div> -->
        <div id="editModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Edit Event</h4>
                    </div>
                    <form id="gr" name="gr">
                        <div class="modal-body">
                            <div style="padding:10px 20px;">
                                <label for="un" class="ui-hidden-accessible">Event Name:</label>
                                <input type="text" name="eventname" id="eventname" value="" placeholder="Event Name" data-theme="a">
                                <label for="text" class="ui-hidden-accessible">Description:</label>
                                <input type="text" name="description" id="description" value="" placeholder="Description" data-theme="a">
                                <label for="un" class="ui-hidden-accessible">Street</label>
                                <input type="text" name="street" id="street" value="" placeholder="Street" data-theme="a">
                                <label for="un" class="ui-hidden-accessible">City</label>
                                <input type="text" name="city" id="city" value="" placeholder="City" data-theme="a">
                                <label for="un" class="ui-hidden-accessible">State</label>
                                <input type="text" name="state" id="state" value="" placeholder="State" data-theme="a">
                                <label for="un" class="ui-hidden-accessible">Zipcode</label>
                                <input type="text" name="zipcode" id="zipcode" value="" placeholder="Zipcode" data-theme="a">
                                <label for="un" class="ui-hidden-accessible">Date:</label>
                                <input type="text" name="date" class="dp" id="date" placeholder="mm-dd-yyyy">
                                <label for="un" class="ui-hidden-accessible">Time:</label>
                                <input type="text" name="time" id="time" value="" placeholder="Time" data-theme="a">
                                <label for="un" class="ui-hidden-accessible">Capacity:</label>
                                <input type="text" name="capacity" id="capacity" value="" placeholder="Capacity" data-theme="a">
                                <input type="hidden" name="userid" id="userid" value="" placeholder="" data-theme="a">
                                <input type="hidden" name="eventid" id="eventid" value="" placeholder="" data-theme="a">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" data-theme="b" data-icon="check" class="btn btn-info btn-width-create">Edit Event</button>
                            <button type="button" class="btn btn-default btn-width" data-dismiss="modal">Close</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <a href="index.html" rel="external" data-role="button" data-theme="a" data-icon="power" style="color:#fff; width:30px; height:10px; margin-left:90%;line-height: 0px !important;font-size: 23px;" onclick="logout()"><span style="color:#000; font-size:8px;margin-left:-20px;">Logout</span></a>
        <div data-role="content" data-theme="a" style="background-color:transparent;">
            <div>
                <table class="ttable" style="width:100%;color:white;">
                    <thead class="thead-inverse" style="width:100%;color:white;">
                        <tr class='ttr' style="width:100%;">
                            <th class="tth" align="left" style="width:20%;">#</th>
                            <th class="tth" align="left" style="width:20%;">Event Name</th>
                            <th class="tth" align="left" style="width:20%;">Location</th>
                            <th class="tth" align="left" style="width:10%;">Date</th>
                            <th class="tth" align="left" style="width:10%;">Time</th>
                            <th class="tth" align="left" style="width:5%;"></th>
                            <th class="tth" align="left" style="width:5%;"></th>
                        </tr>
                    </thead>
                    <tbody id="table_for_events" style="width:100%;">
                    </tbody>
                </table>
            </div>
        </div>
        <form id="forinput" name="forinput">
             <input type="hidden" style="display:none" class= "uidobj" name="userid" id="userid">
        </form>
        <form id="gr1" name="gr1">
            <input type="hidden" style="display:none" name="userid" id="userid">
            <input type="hidden" style="display:none" name="formLoginUserName" id="formLoginUserName">
            <input type="hidden" style="display:none" name="eventid" id="eventid">
            <input type="hidden" style="display:none" name="eventname" id="eventname">
        </form>
        <!-- <div data-role="content" data-theme="a" style="background-color:#000;">

    <h1 style="color:#fff;">Course</h1>
    <p style="color:#fff;"> Please select the Event number</p>
    <div class="dropdown-menu" id="course" style="background-color:#fff;">
        <a href="#" class="dropdown-deploy" style="background-color:#fff;"><em class="left-dropdown bg-dark"></em>Select Course Number</a>
        <a href="#" class="dropdown-hidden" style="background-color:#fff;"><em class="left-dropdown bg-dark"></em>Hide Course Number</a>
    </div>
    <h1 style="color:#fff;">Student</h1>
    <p style="color:#fff;"> Please select the User </p>
    <div class="dropdown-menu" id="student" style="background-color:#fff;">
        <a href="#" class="dropdown-deploy" style="background-color:#fff;"><em class="left-dropdown bg-dark"></em>Select Student</a>
        <a href="#" class="dropdown-hidden" style="background-color:#fff;"><em class="left-dropdown bg-dark"></em>Hide Student</a>
    </div>
    <h1 style="color:#fff;">Marks</h1>
    <div class="toggle-container-v4">
        <div class="toggle-v4">
            <a href="#" class="show-toggle-v4" style="display: none;">Marks</a>
            <a href="#" class="hide-toggle-v4" style="display: block;">Marks</a>
            <div class="clear"></div>
            <div class="toggle-content-v4" style="display: none;">
                <form name="gr" id="gr">
                    <fieldset>
                        <input type="hidden" name="CourseId" type="number" style="display: none;" id="CourseId">
                        <input type="hidden" name="StudentId" type="number" style="display: none;" id="StudentId">
                        <div class="fieldcontain">
                            <label class="field-title gradeTextField" for="sHomeworkField">Homework:<span>(required)</span>
                            </label>
                            <input type="range" name="MHomework" id="MHomework" value="60" min="0" max="100" data-highlight="true" data-mini="true" />
                        </div>
                        <div class="fieldcontain">
                            <label class="field-title gradeTextField" for="sLabsField">Lab:<span>(required)</span>
                            </label>
                            <input type="range" name="MLabs" id="MLabs" value="60" min="0" max="100" data-highlight="true" data-mini="true">
                        </div>
                        <div class="fieldcontain">
                            <label class="field-title gradeTextField" for="sProjectField">Project:<span>(required)</span>
                            </label>
                            <input type="range" name="MProject" id="MProject" value="60" min="0" max="100" data-highlight="true" data-mini="true">
                        </div>
                        <div class="fieldcontain">
                            <label class="field-title gradeTextField" for="sPresentationField">Presentation:<span>(required)</span>
                            </label>
                            <input type="range" name="MPresentation" id="MPresentation" value="60" min="0" max="100" data-highlight="true" data-mini="true">
                        </div>
                        <div class="fieldcontain">
                            <label class="field-title gradeTextField" for="sMidtermField">Midterm:<span>(required)</span>
                            </label>
                            <input type="range" name="MMidterm" id="MMidterm" value="60" min="0" max="100" data-highlight="true" data-mini="true">
                        </div>
                        <div class="fieldcontain">
                            <label class="field-title gradeTextField" for="sFinalField">Final:<span>(required)</span>
                            </label>
                            <input type="range" name="MFinal" id="MFinal" value="60" min="0" max="100" data-highlight="true" data-mini="true">
                        </div>
                    </fieldset>
                    <fieldset class="ui-grid-a">
                        <div class="ui-block-a">
                            <button type="submit" data-theme="c">Save</button>
                        </div>
                        <div class="ui-block-b">
                            <button type="reset" data-theme="f">Cancel</button>
                        </div>
                    </fieldset>
                </form>
                <div class="clear"></div>
                <label id="totalMarksSaveStatus" style="font:bold  20px; color:#000;"></label>
            </div>
        </div>
    </div>
</div>
<p>
</p>
</div>
 -->
    </div>
</body>

</html>
